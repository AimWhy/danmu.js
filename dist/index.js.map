{"version":3,"sources":["webpack://danmu.js/webpack/universalModuleDefinition","webpack://danmu.js/webpack/bootstrap","webpack://danmu.js/./src/utils/util.js","webpack://danmu.js/./node_modules/es5-ext/object/is-value.js","webpack://danmu.js/./node_modules/type/value/is.js","webpack://danmu.js/./src/index.js","webpack://danmu.js/./src/danmu.js","webpack://danmu.js/./node_modules/event-emitter/index.js","webpack://danmu.js/./node_modules/d/index.js","webpack://danmu.js/./node_modules/type/plain-function/is.js","webpack://danmu.js/./node_modules/type/function/is.js","webpack://danmu.js/./node_modules/type/prototype/is.js","webpack://danmu.js/./node_modules/type/object/is.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/index.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/shim.js","webpack://danmu.js/./node_modules/es5-ext/function/noop.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-value.js","webpack://danmu.js/./node_modules/es5-ext/object/normalize-options.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/index.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-callable.js","webpack://danmu.js/./src/control.js","webpack://danmu.js/./src/domrecycle.js","webpack://danmu.js/./src/main.js","webpack://danmu.js/./src/channel.js","webpack://danmu.js/./src/bullet.js","webpack://danmu.js/./src/style/index.scss?2278","webpack://danmu.js/./src/style/index.scss","webpack://danmu.js/./node_modules/css-loader/lib/css-base.js","webpack://danmu.js/./node_modules/style-loader/lib/addStyles.js","webpack://danmu.js/./node_modules/style-loader/lib/urls.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","util","domObj","RecyclableDomList","createDom","el","tpl","attrs","cname","dom","document","createElement","className","innerHTML","keys","forEach","item","setAttribute","hasClass","classList","Array","some","match","RegExp","addClass","replace","split","add","removeClass","remove","reg","toggleClass","findDom","sel","querySelector","e","startsWith","getElementById","slice","deepCopy","dst","src","typeOf","Node","concat","obj","toString","copyDom","nodeType","back","tagName","attributes","node","formatTime","time","Math","floor","_undefined","val","DanmuJs","options","this","config","overlap","area","start","end","live","comments","direction","hideArr","self","comment","duration","container","emit","containerStyle","style","player","bulletBtn","Control","main","pause","play","stop","id","txt","prior","data","unshift","push","oldID","newID","containerPos_","getBoundingClientRect","queue","pauseMove","status","startMove","indexOf","arr","filter","color","index","splice","on","once","off","methods","descriptors","base","callable","apply","Function","defineProperties","descriptor","configurable","writable","type","listener","arguments","__eeOnceListener__","__ee__","listeners","candidate","length","args","isValue","isPlainFunction","assign","normalizeOpts","contains","dscr","w","desc","gs","set","undefined","isFunction","classRe","functionToString","test","isPrototype","error","isObject","constructor","possibleTypes","foo","bar","trzy","max","dest","TypeError","process","opts1","result","String","str","searchString","fn","danmu","Main","defaultOff","state","switchBtn","RecyclableDOMList","initDOM","initSize","init","idleList","usingList","_id","_expand","firseIdle","shift","idx","textcontent","size","channel","Channel","playedData","timer","retryTimer","interval","updateQueue","rdata","bullet","bol","sort","a","b","setInterval","readData","dataHandle","resetWithCb","clearInterval","reset","channels","containerPos","resized","currentTime","list","Bullet","attach","addBullet","topInit","detach","noDiscard","removeBullet","containerWidth","width","containerHeight","height","containerLeft","left","containerRight","right","bulletResizeTimer","abs","resize","isFullscreen","setTimeout","isDanmuPause","bookChannelId","fontSize","navigator","userAgent","channelSize","scroll","top","bottom","operating","bookId","channel_id","channelWidth","channelHeight","num","occupy","ceil","message","flag","pos","j","curBullet","curBulletPos","newT","curV","curT","newS","newV","bOffset","nextAddTime","channelId","loop","cb","moveV","use","appendChild","textContent","elPos","unuse","removeChild","transformOrigin","transform","transition","clearTimeout","removeTimer","willChange","pastDuration","Date","getTime","moveTime","pastS","nowS","moveMoreS","moveContainerHeight","moveContainerWidth","startTime","leftDuration","func","margin","bulletPos","parentNode","content","locals","useSourceMap","map","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","getTarget","target","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","createStyleElement","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"danmu.js\"] = factory();\n\telse\n\t\troot[\"danmu.js\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import RecyclableDomList from '../domrecycle.js'\n\nlet util = {}\n\nutil.domObj = new RecyclableDomList()\n\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\n  let dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    let key = item\n    let value = attrs[item]\n    if (el === 'video' || el === 'audio') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nutil.hasClass = function (el, className) {\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } else {\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nutil.addClass = function (el, className) {\n  if (el.classList) {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } else if (!util.hasClass(el, className)) {\n    el.className += ' ' + className\n  }\n}\n\nutil.removeClass = function (el, className) {\n  if (el.classList) {\n    className.split(/\\s+/g).forEach(item => {\n      el.classList.remove(item)\n    })\n  } else if (util.hasClass(el, className)) {\n    className.split(/\\s+/g).forEach(item => {\n      let reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      el.className = el.className.replace(reg, ' ')\n    })\n  }\n}\n\nutil.toggleClass = function (el, className) {\n  className.split(/\\s+/g).forEach(item => {\n    if (util.hasClass(el, item)) {\n      util.removeClass(el, item)\n    } else {\n      util.addClass(el, item)\n    }\n  })\n}\n\nutil.findDom = function (el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    if (sel.startsWith('#')) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\nutil.deepCopy = function (dst, src) {\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\n    Object.keys(src).forEach(key => {\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (!dst[key]) {\n          dst[key] = src[key]\n        } else {\n          util.deepCopy(dst[key], src[key])\n        }\n      } else if (util.typeOf(src[key]) === 'Array') {\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\n\nutil.typeOf = function (obj) {\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\nutil.copyDom = function (dom) {\n  if (dom && dom.nodeType === 1) {\n    let back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\nutil.formatTime = function (time) {\n  let s = Math.floor(time)\n  let ms = time - s\n  return s * 1000 + ms\n}\n\nexport default util\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","import DanmuJs from './danmu'\nimport './style/index.scss'\nexport default DanmuJs\n","import EventEmitter from 'event-emitter'\nimport Control from './control'\nimport util from './utils/util'\n\nclass DanmuJs {\n  constructor (options) {\n    this.config = util.deepCopy({\n      overlap: false,\n      area: {\n        start: 0,\n        end: 1\n      },\n      live: false,\n      comments: [],\n      direction: 'r2l'\n    }, options)\n    this.hideArr = []\n    EventEmitter(this)\n    let self = this\n    this.config.comments.forEach(comment => {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      if(!comment.mode) {\n        comment.mode = 'scroll'\n      }\n    })\n    if(this.config.container && this.config.container.nodeType === 1) {\n      this.container = this.config.container\n    } else {\n      this.emit('error', 'container id can\\'t be empty')\n      return false\n    }\n    if(this.config.containerStyle) {\n      let style = this.config.containerStyle\n      Object.keys(style).forEach(function (key) {\n        self.container.style[key] = style[key]\n      })\n    }\n    this.live = this.config.live\n    this.player = this.config.player\n    this.direction = this.config.direction\n    util.addClass(this.container, 'danmu')\n    this.bulletBtn = new Control(this)\n    this.emit('ready')\n  }\n\n  start () {\n    this.bulletBtn.main.start()\n  }\n\n  pause () {\n    this.bulletBtn.main.pause()\n  }\n\n  play () {\n    this.bulletBtn.main.play()\n  }\n\n  stop () {\n    this.bulletBtn.main.stop()\n  }\n\n  sendComment (comment) {\n    if(!comment.duration) {\n      comment.duration = 15000\n    }\n    if (comment && comment.id && comment.duration && (comment.el || comment.txt)) {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      if(comment.prior) {\n        this.bulletBtn.main.data.unshift(comment)\n      } else {\n        this.bulletBtn.main.data.push(comment)\n      }\n    }\n  }\n\n  setCommentID (oldID, newID) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (oldID && newID) {\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === oldID) {\n          data.id = newID\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === oldID) {\n          item.id = newID\n          item.pauseMove(containerPos_)\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentDuration (id, duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (id && duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === id) {\n          data.duration = duration\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setAllDuration (mode = 'scroll', duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.forEach(data => {\n        if(mode === data.mode) {\n          data.duration = duration\n        }\n      })\n      this.bulletBtn.main.queue.forEach(item => {\n        if(mode === item.mode) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\n        }\n      })\n    }\n  }\n\n  hide (mode = 'scroll') {\n    if(this.hideArr.indexOf(mode) < 0) {\n      this.hideArr.push(mode)\n    }\n    let arr = this.bulletBtn.main.queue.filter(item => mode === item.mode || (mode === 'color' && item.color))\n    arr.forEach(item => item.remove())\n  }\n\n  show (mode = 'scroll') {\n    let index = this.hideArr.indexOf(mode)\n    if(index > -1) {\n      this.hideArr.splice(index, 1)\n    }\n  }\n\n  setDirection (direction = 'r2l') {\n    this.emit('changeDirection', direction)\n  }\n}\n\nexport default DanmuJs\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","import util from './utils/util'\nimport Main from './main'\n\nclass Control {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.main = new Main(danmu)\n    if(!danmu.config.defaultOff) {\n      this.main.start()\n    }\n  }\n\n  createSwitch (state = true) {\n    this.switchBtn = util.createDom('dk-switch', '<span class=\"txt\">弹</span>', {}, `danmu-switch ${state ? 'danmu-switch-active' : ''}`)\n    return this.switchBtn\n  }\n}\n\nexport default Control\n","\nexport default class RecyclableDOMList {\n  constructor(options) {\n    options = {\n      initDOM: () => document.createElement('div'),\n      initSize: 10\n    }\n    this.init(options)\n  }\n\n  init(options) {\n    this.idleList = []\n    this.usingList = []\n    this._id = 0\n    this.options = options\n    this._expand(options.initSize)\n  }\n\n  use() {\n    if (!this.idleList.length) {\n      this._expand(1)\n    }\n    const firseIdle = this.idleList.shift()\n    this.usingList.push(firseIdle)\n    return firseIdle\n  }\n\n  unuse(dom) {\n    const idx = this.usingList.indexOf(dom)\n    if (idx < 0) {\n      return\n    }\n    this.usingList.splice(idx, 1)\n    dom.innerHTML = ''\n    dom.textcontent = ''\n    dom.style = ''\n    this.idleList.push(dom)\n  }\n\n  _expand(size) {\n    for (let i = 0; i < size; i++) {\n      this.idleList.push(this.options.initDOM(this._id++))\n    }\n  }\n}","import Channel from './channel'\nimport Bullet from './bullet'\nimport util from './utils/util'\n\n/**\n * [Main 弹幕主进程]\n * @type {Class}\n */\nclass Main {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.container = danmu.container\n    this.channel = new Channel(danmu)// 弹幕轨道实例\n    this.data = [].concat(danmu.config.comments)\n    this.playedData = []\n    this.queue = []// 等待播放的弹幕队列\n    this.timer = null// 弹幕动画定时器句柄\n    this.retryTimer = null// 弹幕更新重试定时器句柄\n    this.interval = 2000// 弹幕队列缓存间隔\n    this.status = 'idle'// 当前弹幕正在闲置\n    danmu.on('bullet_remove', this.updateQueue.bind(this))\n    let self = this\n    this.danmu.on('changeDirection', direction => {\n      self.danmu.direction = direction\n    })\n  }\n  // 在渲染队列中移除已经展示完的弹幕对象\n  updateQueue (rdata) {\n    let self = this\n    self.queue.some((item, index) => {\n      if (item.id === rdata.bullet.id) {\n        self.queue.splice(index, 1)\n        return true\n      } else {\n        return false\n      }\n    })\n  }\n  init (bol, self) {\n    if (!self) {\n      self = this\n    }\n    self.data.sort((a, b) => a.start - b.start)\n    if (!self.retryTimer) {\n      self.retryTimer = setInterval(function () {\n        self.readData()\n        self.dataHandle()\n      }, self.interval - 1000)\n    }\n  }\n  // 启动弹幕渲染主进程\n  start () {\n    let self = this\n    this.status = 'playing'\n    this.queue = []\n    this.container.innerHTML = ''\n    this.channel.resetWithCb(self.init, self)\n  }\n  stop () {\n    let self = this\n    this.status = 'closed'\n    clearInterval(self.retryTimer)\n    self.retryTimer = null\n    self.channel.reset()\n    this.queue = []\n    self.container.innerHTML = ''\n  }\n  play () {\n    this.status = 'playing'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            if(!item.resized) {\n              item.startMove(containerPos)\n              item.resized = true\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.resized = false\n          })\n        }\n      })\n    }\n  }\n  pause () {\n    this.status = 'paused'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.pauseMove(containerPos)\n          })\n        }\n      })\n    }\n  }\n  dataHandle () {\n    let self = this\n    if (this.status === 'paused' || this.status === 'closed') {\n      return\n    }\n    if (self.queue.length) {\n      self.queue.forEach(item => {\n        if (item.status === 'waiting' || item.status === 'paused') {\n          // item.status = 'start'\n          item.startMove(self.channel.containerPos)\n        }\n      })\n    }\n  }\n  readData () {\n    let self = this, danmu = this.danmu\n    let currentTime = 0\n    if(danmu.player && danmu.player.currentTime) {\n      currentTime = util.formatTime(danmu.player.currentTime)\n    }\n    let bullet, interval = self.interval, channel = self.channel, result\n    let list\n    if(danmu.player) {\n      list = self.data.filter(item => {\n        if (!item.start && self.danmu.hideArr.indexOf(item.mode) < 0) {\n          if (!item.color || self.danmu.hideArr.indexOf('color') < 0) {\n            item.start = currentTime\n          }\n        }\n        return self.danmu.hideArr.indexOf(item.mode) < 0 && (!item.color || self.danmu.hideArr.indexOf('color') < 0) && item.start - interval <= currentTime && currentTime <= item.start + interval\n      })\n      if(danmu.live) {\n        self.data = self.data.filter(item => {\n          if (!item.start) {\n            item.start = currentTime\n          }\n          return item.start > currentTime - 3 * interval\n        })\n      }\n    } else {\n      list = self.data.splice(0, 1)\n      // self.data = []\n      if(list.length === 0) list = self.playedData.splice(0, 1)\n    }\n\n    if (list.length > 0) {\n      list.forEach(item => {\n        bullet = new Bullet(danmu, item)\n        bullet.attach()\n        // console.log(list.length)\n        result = channel.addBullet(bullet)\n        if (result.result) {\n          self.queue.push(bullet)\n          bullet.topInit()\n        } else {\n          bullet.detach()\n          if(item.noDiscard) {\n            if(item.prior) {\n              self.data.unshift(item)\n            } else {\n              self.data.push(item)\n            }\n          }\n        }\n      })\n    }\n  }\n}\n\nexport default Main\n","/**\n * [Channel 弹幕轨道控制]\n * @type {Class}\n */\nclass Channel {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.reset()\n    let self = this\n    this.danmu.on('bullet_remove', function (r) {\n      self.removeBullet(r.bullet)\n    })\n    this.direction = danmu.direction\n    this.danmu.on('changeDirection', direction => {\n      self.direction = direction\n    })\n    this.containerPos = this.danmu.container.getBoundingClientRect()\n    this.containerWidth = this.containerPos.width\n    this.containerHeight = this.containerPos.height\n    this.containerLeft = this.containerPos.left\n    this.containerRight = this.containerPos.right\n    // this.player.on('timeupdate', function () {\n    this.danmu.bulletResizeTimer = setInterval(function () {\n      self.containerPos = self.danmu.container.getBoundingClientRect()\n      if (Math.abs(self.containerPos.width - self.containerWidth) >= 2 || Math.abs(self.containerPos.height - self.containerHeight) >= 2 || Math.abs(self.containerPos.left - self.containerLeft) >= 2 || Math.abs(self.containerPos.right - self.containerRight) >= 2) {\n        // console.log('新播放器宽度：' + self.containerPos.width)\n        // console.log('旧播放器宽度：' + self.playerWidth)\n        // console.log('新播放器高度：' + self.containerPos.height)\n        // console.log('旧播放器高度：' + self.playerHeight)\n        // console.log('新播放器左：' + self.containerPos.left)\n        // console.log('旧播放器左：' + self.playerLeft)\n        // console.log('新播放器右：' + self.containerPos.right)\n        // console.log('旧播放器右：' + self.playerRight)\n        self.containerWidth = self.containerPos.width\n        self.containerHeight = self.containerPos.height\n        self.containerLeft = self.containerPos.left\n        self.containerRight = self.containerPos.right\n        self.resize(true)\n      }\n    }, 50)\n    // ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'].forEach(item => {\n    //   document.addEventListener(item, function () {\n    //     console.log(item)\n    //     setTimeout(function () {\n    //       self.resize(true)\n    //     }, 20)\n    //   })\n    // })\n  }\n  resize (isFullscreen = false) {\n    let container = this.danmu.container\n    let self = this\n    setTimeout(function () {\n      let isDanmuPause = self.danmu.bulletBtn.main.status === 'paused'\n      if (self.danmu.bulletBtn.main.data) {\n        self.danmu.bulletBtn.main.data.forEach(item => {\n          if (item.bookChannelId) {\n            delete item['bookChannelId']\n            // console.log('resize导致' + item.id + '号优先弹幕预定取消')\n          }\n        })\n      }\n      // console.log('resize导致所有轨道恢复正常使用')\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      if (self.channels && self.channels.length <= channels.length) {\n        for (let i = 0; i < self.channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, isFullscreen)\n                  !isDanmuPause && item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n            })\n          })\n          self.channels[i].queue['bottom'].forEach(item => {\n            if (item.el) {\n              channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n              if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n                let channel_id = [].concat(item.channel_id)\n                item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                item.top = item.channel_id[0] * fontSize\n                if (self.danmu.config.area && self.danmu.config.area.start) {\n                  item.top += self.containerHeight * self.danmu.config.area.start\n                }\n                item.topInit()\n              }\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, isFullscreen)\n                !isDanmuPause && item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      } else if (self.channels && self.channels.length > channels.length) {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            if (key === 'top' && i > Math.floor(channels.length / 2)) {\n\n            } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n\n            } else {\n              let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n              self.channels[num].queue[key].forEach((item, index) => {\n                if (item.el) {\n                  channels[i].queue[key].push(item)\n                  if(key === 'bottom') {\n                    if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                      let channel_id = [].concat(item.channel_id)\n                      item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                      item.top = item.channel_id[0] * fontSize\n                      if (self.danmu.config.area && self.danmu.config.area.start) {\n                        item.top += self.containerHeight * self.danmu.config.area.start\n                      }\n                      item.topInit()\n                    }\n                  }\n                  if(!item.resized) {\n                    item.pauseMove(self.containerPos, isFullscreen)\n                    !isDanmuPause && item.startMove(self.containerPos)\n                    item.resized = true\n                  }\n                }\n                self.channels[num].queue[key].splice(index, 1)\n              })\n            }\n          })\n        }\n        for (let i = channels.length; i < self.channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              item.pauseMove(self.containerPos)\n              item.remove()\n            })\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        if(self.direction === 'b2t') {\n          self.channelWidth = fontSize\n        } else {\n          self.channelHeight = fontSize\n        }\n      }\n    }, 10)\n  }\n  addBullet (bullet) {\n    // if (bullet.prior) {\n      // console.log(bullet.id + '号优先弹幕请求注册')\n    // }\n    let self = this\n    let danmu = this.danmu\n    let channels = this.channels\n    let channelHeight, channelWidth, occupy\n    if(self.direction === 'b2t') {\n      channelWidth = this.channelWidth\n      occupy = Math.ceil(bullet.width / channelWidth)\n    } else {\n      channelHeight = this.channelHeight\n      occupy = Math.ceil(bullet.height / channelHeight)\n    }\n    if (occupy > channels.length) {\n      return {\n        result: false,\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\n      }\n    } else {\n      let flag = true, channel, pos = -1\n      for (let i = 0, max = channels.length; i < max; i++) {\n        if (channels[i].queue[bullet.mode].some(item => item.id === bullet.id)) {\n          return {\n            result: false,\n            message: `exsited, channelOrder=${i},danmu_id=${bullet.id}`\n          }\n        }\n      }\n      if(bullet.mode === 'scroll') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            channel = channels[j]\n            if (channel.operating.scroll) {\n              flag = false\n              break\n            }\n            if ((channel.bookId.scroll || bullet.prior) && (channel.bookId.scroll !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating.scroll = true\n            let curBullet = channel.queue.scroll[0]\n            if (curBullet) {\n              let curBulletPos = curBullet.el.getBoundingClientRect()\n              if(self.direction === 'b2t') {\n                if (curBulletPos.bottom > self.containerPos.bottom) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              } else {\n                if (curBulletPos.right > self.containerPos.right) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              }\n\n              // Vcur * t + Scur已走 - Widthcur = Vnew * t\n              // t = (Scur已走 - Widthcur) / (Vnew - Vcur)\n              // Vnew * t < Widthplayer\n              let curS, curV, curT, newS, newV, newT\n              if(self.direction === 'b2t') {\n                curS = curBulletPos.top - self.containerPos.top + curBulletPos.height\n\n                curV = (self.containerPos.height + curBulletPos.height) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.height\n                newV = (self.containerPos.height + bullet.height) / bullet.duration\n              } else {\n                curS = curBulletPos.left - self.containerPos.left + curBulletPos.width\n\n                curV = (self.containerPos.width + curBulletPos.width) / curBullet.duration\n                curT = curS / curV\n\n                newS = self.containerPos.width\n                newV = (self.containerPos.width + bullet.width) / bullet.duration\n              }\n              newT = newS / newV\n              if (!danmu.config.bOffset) {\n                danmu.config.bOffset = 0\n              }\n              if (curV < newV && curT + danmu.config.bOffset > newT) {\n                flag = false\n                channel.operating.scroll = false\n                break\n              }\n            }\n            channel.operating.scroll = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'top') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j > Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'bottom') {\n        for (let i = channels.length - occupy; i >= 0; i--) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j <= Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      }\n\n      if (pos !== -1) {\n        for (let i = pos, max = pos + occupy; i < max; i++) {\n          channel = channels[i]\n          channel.operating[bullet.mode] = true\n          channel.queue[bullet.mode].unshift(bullet)\n          if (bullet.prior) {\n            delete channel.bookId[bullet.mode]\n            // console.log(i + '号轨道恢复正常使用')\n          }\n          channel.operating[bullet.mode] = false\n        }\n        if (bullet.prior) {\n          // console.log(bullet.id + '号优先弹幕运行完毕')\n          delete bullet['bookChannelId']\n          if(danmu.player) {\n            let dataList = danmu.bulletBtn.main.data\n            dataList.some(function (item) {\n              if (item.id === bullet.id) {\n                delete item['bookChannelId']\n                return true\n              } else {\n                return false\n              }\n            })\n          }\n        }\n        bullet.channel_id = [pos, occupy]\n\n        if(self.direction === 'b2t') {\n          bullet.top = pos * channelWidth\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerWidth * self.danmu.config.area.start\n          }\n        } else {\n          bullet.top = pos * channelHeight\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerHeight * self.danmu.config.area.start\n          }\n        }\n        return {\n          result: bullet,\n          message: 'success'\n        }\n      } else {\n        if (bullet.prior) {\n          if (!bullet.bookChannelId) {\n            pos = -1\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n              flag = true\n              for (let j = i; j < i + occupy; j++) {\n                if (channels[j].bookId[bullet.mode]) {\n                  flag = false\n                  break\n                }\n              }\n              if (flag) {\n                pos = i\n                break\n              }\n            }\n            if (pos !== -1) {\n              for (let j = pos; j < pos + occupy; j++) {\n                channels[j].bookId[bullet.mode] = bullet.id\n                // console.log(j + '号轨道被' + bullet.id + '号优先弹幕预定')\n              }\n              let nextAddTime = 2\n              if(danmu.player) {\n                let dataList = danmu.bulletBtn.main.data\n                dataList.some(function (item) {\n                  if (item.id === bullet.id) {\n                    // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                    item.start += nextAddTime * 1000\n                    item.bookChannelId = [pos, occupy]\n                    // console.log(bullet.id + '号优先弹幕预定了' + pos + '~' + pos + occupy - 1 + '号轨道')\n                    // console.log(`${bullet.id}号优先弹幕预定了${pos}~${pos + occupy - 1}号轨道`)\n                    return true\n                  } else {\n                    return false\n                  }\n                })\n              }\n            }\n          } else {\n            let nextAddTime = 2\n            if(danmu.player) {\n              let dataList = danmu.bulletBtn.main.data\n              dataList.some(function (item) {\n                if (item.id === bullet.id) {\n                  // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                  item.start += nextAddTime * 1000\n                  return true\n                } else {\n                  return false\n                }\n              })\n            }\n          }\n        }\n        return {\n          result: false,\n          message: 'no surplus will right'\n        }\n      }\n    }\n  }\n  removeBullet (bullet) {\n    // console.log('removeBullet')\n    let channels = this.channels\n    let channelId = bullet.channel_id\n    let channel\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\n      channel = channels[i]\n      if (channel) {\n        channel.operating[bullet.mode] = true\n        let i = -1\n        channel.queue[bullet.mode].some((item, index) => {\n          if (item.id === bullet.id) {\n            i = index\n            return true\n          } else {\n            return false\n          }\n        })\n        if (i > -1) {\n          channel.queue[bullet.mode].splice(i, 1)\n        }\n        channel.operating[bullet.mode] = false\n      }\n    }\n    if(bullet.options.loop) {\n      this.danmu.bulletBtn.main.playedData.push(bullet.options)\n    }\n  }\n  resetArea () {\n    let container = this.danmu.container\n    let self = this\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n\n    if (self.channels && self.channels.length <= channels.length) {\n      for (let i = 0; i < self.channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top'].forEach(key => {\n          self.channels[i].queue[key].forEach(item => {\n            if (item.el) {\n              channels[i].queue[key].push(item)\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, false)\n                item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        })\n        self.channels[i].queue['bottom'].forEach(item => {\n          if (item.el) {\n            channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n            if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n              let channel_id = [].concat(item.channel_id)\n              item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n              item.top = item.channel_id[0] * fontSize\n              if (self.danmu.config.area && self.danmu.config.area.start) {\n                item.top += self.containerHeight * self.danmu.config.area.start\n              }\n              item.topInit()\n            }\n            if(!item.resized) {\n              item.pauseMove(self.containerPos, false)\n              item.startMove(self.containerPos)\n              item.resized = true\n            }\n          }\n        })\n      }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized 重置:' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    } else if (self.channels && self.channels.length > channels.length) {\n      for (let i = 0; i < channels.length; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        };\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          if (key === 'top' && i > Math.floor(channels.length / 2)) {\n\n          } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n\n          } else {\n            let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n            self.channels[num].queue[key].forEach((item, index) => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(key === 'bottom') {\n                  if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                    let channel_id = [].concat(item.channel_id)\n                    item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                    item.top = item.channel_id[0] * fontSize\n                    if (self.danmu.config.area && self.danmu.config.area.start) {\n                      item.top += self.containerHeight * self.danmu.config.area.start\n                    }\n                    item.topInit()\n                  }\n                }\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, false)\n                  item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n              self.channels[num].queue[key].splice(index, 1)\n            })\n          }\n        })\n      }\n      // for (let i = channels.length; i < self.channels.length; i++) {\n      //   ['scroll', 'top', 'bottom'].forEach(key => {\n      //     self.channels[i].queue[key].forEach(item => {\n      //       item.pauseMove(self.containerPos)\n      //       item.remove()\n      //     })\n      //   })\n      // }\n      for (let i = 0; i < channels.length; i++) {\n        ['scroll', 'top', 'bottom'].forEach(key => {\n          channels[i].queue[key].forEach(item => {\n            // console.log('resized 重置:' + item)\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n  }\n  reset () {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    setTimeout(function () {\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        if(self.direction === 'b2t') {\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n        } else {\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n        }\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize\n      if(self.direction === 'b2t') {\n        channelSize = Math.floor(self.width / fontSize)\n      } else {\n        channelSize = Math.floor(self.height / fontSize)\n      }\n\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      self.channels = channels\n      if(self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }, 200)\n  }\n  resetWithCb (cb, main) {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      if(self.direction === 'b2t') {\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\n      } else {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n    }\n    self.container = container\n    let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n    let channelSize\n    if(self.direction === 'b2t') {\n      channelSize = Math.floor(self.width / fontSize)\n    } else {\n      channelSize = Math.floor(self.height / fontSize)\n    }\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n    self.channels = channels\n    self.channelHeight = fontSize\n    if (cb) {\n      cb(true, main)\n    }\n  }\n}\n\nexport default Channel\n","import util from './utils/util'\n\n/**\n * [Bullet 弹幕构造类]\n * @type {Class}\n */\nclass Bullet {\n  constructor (danmu, options) {\n    this.danmu = danmu\n    this.options = options\n    this.duration = options.duration\n    this.moveV = options.moveV\n    this.id = options.id\n    this.container = danmu.container\n    this.start = options.start\n    this.prior = options.prior\n    this.color = options.color\n    this.bookChannelId = options.bookChannelId\n    this.direction = danmu.direction\n    let self = this\n    this.danmu.on('changeDirection', direction => {\n      self.direction = direction\n    })\n    let el\n    this.domObj = util.domObj\n    if(options.el && options.el.nodeType === 1) {\n      el = this.domObj.use()\n      el.appendChild(util.copyDom(options.el))\n      // el = util.copyDom(options.el)\n    } else {\n      el = this.domObj.use()\n      // el = document.createElement('div')\n      el.textContent = options.txt\n      if(options.style) {\n        let style = options.style\n        Object.keys(style).forEach(function (key) {\n          el.style[key] = style[key]\n        })\n      }\n    }\n\n    if(options.mode === 'top' || options.mode === 'bottom') {\n      this.mode = options.mode\n    } else {\n      this.mode = 'scroll'\n    }\n    this.el = el\n    this.status = 'waiting'// waiting,start,end\n    let containerPos = this.container.getBoundingClientRect()\n    this.el.style.left = `${containerPos.width}px`\n  }\n  attach () {\n    this.container.appendChild(this.el)\n    this.elPos = this.el.getBoundingClientRect()\n    if(this.direction === 'b2t') {\n      this.width = this.elPos.height\n      this.height = this.elPos.width\n    } else {\n      this.width = this.elPos.width\n      this.height = this.elPos.height\n    }\n    if(this.moveV) {\n      let containerPos = this.container.getBoundingClientRect()\n      this.duration = (containerPos.width + this.width) / this.moveV * 1000\n    }\n  }\n  detach () {\n    if(this.container && this.el) {\n      this.domObj.unuse(this.el)\n      this.container.removeChild(this.el)\n    }\n    let self = this\n    this.danmu.off('changeDirection', direction => {\n      self.direction = direction\n    })\n    this.el = null\n  }\n  topInit () {\n    if(this.direction === 'b2t') {\n      let containerPos = this.container.getBoundingClientRect()\n      this.el.style.transformOrigin = 'left top'\n      this.el.style.transform = `translateX(-${this.top}px) translateY(${containerPos.height}px) translateZ(0px) rotate(90deg)`;\n      this.el.style.transition = `transform 0s linear 0s`\n    } else {\n      this.el.style.top = `${this.top}px`\n    }\n  }\n  pauseMove (containerPos, isFullscreen = false) {\n    // console.log('pauseMove')\n    let self = this\n    if(this.status === 'paused') {\n      return\n    }\n    this.status = 'paused'\n    clearTimeout(self.removeTimer)\n    if (!this.el) {\n      return\n    }\n    this.el.style.willChange = 'auto'\n    if(this.mode === 'scroll') {\n      if(isFullscreen) {\n        let pastDuration = (new Date().getTime() - self.moveTime) / 1000\n        let pastS = pastDuration * this.moveV\n        let ratio = 0\n        let nowS = 0\n        // console.log('self.moveMoreS: ' + self.moveMoreS)\n        // console.log('pastS: ' + pastS)\n        if(self.moveMoreS - pastS >= 0) {\n          if(this.direction === 'b2t') {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerHeight\n            nowS = ratio * containerPos.height\n          } else {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\n            nowS = ratio * containerPos.width\n          }\n        } else {\n          nowS = self.moveMoreS - pastS\n        }\n        // console.log('nowS: ' + nowS)\n        if(this.direction === 'b2t') {\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        } else {\n          this.el.style.left = `${nowS}px`\n        }\n      } else {\n        if(this.direction === 'b2t') {\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${this.el.getBoundingClientRect().top - containerPos.top}px) translateZ(0px) rotate(90deg)`\n        } else {\n          this.el.style.left = `${this.el.getBoundingClientRect().left - containerPos.left}px`\n        }\n      }\n      if(this.direction === 'b2t') {\n        // this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        this.el.style.transition = 'transform 0s linear 0s'\n      } else {\n        this.el.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)'\n        this.el.style.transition = 'transform 0s linear 0s'\n      }\n    } else {\n      if(!this.pastDuration || !this.startTime) {\n        this.pastDuration = 1\n      } else {\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\n      }\n    }\n  }\n  startMove (containerPos) {\n    // console.log('startMove')\n    let self = this\n    if (!this.el) {\n      return\n    }\n    if(this.status === 'start') {\n      return\n    }\n    this.status = 'start'\n    this.el.style.willChange = 'transform'\n    function func () {\n      if (self.el) {\n        if(self.mode === 'scroll') {\n          let containerPos_ = self.danmu.container.getBoundingClientRect()\n          let bulletPos = self.el.getBoundingClientRect()\n          if(self.direction === 'b2t') {\n            if (bulletPos && bulletPos.bottom <= containerPos_.top + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              self.startMove(containerPos_)\n            }\n          } else {\n            if (bulletPos && bulletPos.right <= containerPos_.left + 100) {\n              self.status = 'end'\n              self.remove()\n            } else {\n              self.pauseMove(containerPos_)\n              self.startMove(containerPos_)\n            }\n          }\n        } else {\n          self.status = 'end'\n          self.remove()\n        }\n      }\n    }\n    if(this.mode === 'scroll') {\n      if(this.direction === 'b2t') {\n        this.moveV = (containerPos.height + this.height) / this.duration * 1000\n        let leftDuration = (self.el.getBoundingClientRect().bottom - containerPos.top) / this.moveV\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\n        setTimeout(function () {\n          if (self.el) {\n            self.el.style.transform = `translateX(-${self.top}px) translateY(-${self.height}px) translateZ(0px) rotate(90deg)`\n            self.moveTime = new Date().getTime()\n            self.moveMoreS = self.el.getBoundingClientRect().top - containerPos.top\n            self.moveContainerHeight = containerPos.height\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\n          }\n        }, 20)\n      } else {\n        this.moveV = (containerPos.width + this.width) / this.duration * 1000\n        let leftDuration = (self.el.getBoundingClientRect().right - containerPos.left) / this.moveV\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\n        setTimeout(function () {\n          if (self.el) {\n            self.el.style.transform = `translateX(-${self.el.getBoundingClientRect().right - containerPos.left}px) translateY(0px) translateZ(0px)`\n            self.moveTime = new Date().getTime()\n            self.moveMoreS = self.el.getBoundingClientRect().left - containerPos.left\n            self.moveContainerWidth = containerPos.width\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\n          }\n        }, 20)\n      }\n    } else {\n      // this.el.style.width = `${this.width}px`\n      // this.el.style.height = `${this.height}px`\n      this.el.style.left = '50%'\n      this.el.style.margin = `0 0 0 -${this.width/2}px`\n      if(!this.pastDuration) {\n        this.pastDuration = 1\n      }\n      let leftDuration = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0\n      this.removeTimer = setTimeout(func, leftDuration)\n      this.startTime = new Date().getTime()\n    }\n  }\n  remove () {\n    // console.log('remove')\n    let self = this\n    if (this.removeTimer) {\n      clearTimeout(this.removeTimer)\n    }\n    if (self.el && self.el.parentNode) {\n      self.el.style.willChange = 'auto'\n      this.danmu.off('changeDirection', direction => {\n        self.direction = direction\n      })\n      this.domObj.unuse(self.el)\n      let parent = self.el.parentNode\n      parent.removeChild(self.el)\n      self.el = null\n      self.danmu.emit('bullet_remove', {\n        bullet: self\n      })\n    }\n  }\n}\n\nexport default Bullet\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}