{"version":3,"sources":["webpack://danmu.js/webpack/universalModuleDefinition","webpack://danmu.js/webpack/bootstrap","webpack://danmu.js/./src/utils/util.js","webpack://danmu.js/./node_modules/es5-ext/object/is-value.js","webpack://danmu.js/./node_modules/style-loader/lib/urls.js","webpack://danmu.js/./node_modules/style-loader/lib/addStyles.js","webpack://danmu.js/./node_modules/css-loader/lib/css-base.js","webpack://danmu.js/./src/style/index.scss","webpack://danmu.js/./src/style/index.scss?6a19","webpack://danmu.js/./src/bullet.js","webpack://danmu.js/./src/channel.js","webpack://danmu.js/./src/main.js","webpack://danmu.js/./src/control.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-callable.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/shim.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/string/#/contains/index.js","webpack://danmu.js/./node_modules/es5-ext/object/is-callable.js","webpack://danmu.js/./node_modules/es5-ext/object/normalize-options.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-value.js","webpack://danmu.js/./node_modules/es5-ext/function/noop.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/index.js","webpack://danmu.js/./node_modules/d/index.js","webpack://danmu.js/./node_modules/event-emitter/index.js","webpack://danmu.js/./src/danmu.js","webpack://danmu.js/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","util","el","arguments","length","undefined","tpl","attrs","cname","dom","document","createElement","className","innerHTML","keys","forEach","item","key","setAttribute","classList","Array","some","match","RegExp","replace","split","add","hasClass","remove","reg","removeClass","addClass","sel","querySelector","e","startsWith","getElementById","slice","str","pad","charstr","String","len","maxlen","Math","ceil","chars","push","join","substring","time","isNaN","hour","padStart","floor","minute","second","touches","touch","changedTouches","clientX","clientY","offsetX","pageX","target","offsetLeft","offsetY","pageY","offsetTop","_target","srcElement","obj","toString","dst","src","typeOf","Node","concat","deepCopy","url","currentStyle","getComputedStyle","backgroundImage","a","href","nodeType","back","tagName","attributes","node","context","eventName","intervalFunc","frequency","_interval","setInterval","bind","clearInterval","imgUrl","width","height","btn","createDom","style","w","h","unit","every","indexOf","parseFloat","trim","backgroundSize","margin","hex","alpha","rgb","test","sixHex","kw","eval","_undefined","val","css","location","Error","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","JSON","stringify","fn","memo","stylesInDom","isOldIE","all","atob","apply","this","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","id","refs","j","parts","addStyle","listToStyles","list","newStyles","base","part","media","sourceMap","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","type","addAttrs","update","result","transform","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","btoa","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","unescape","encodeURIComponent","blob","oldSrc","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","useSourceMap","map","content","cssMapping","sourceMapping","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","alreadyImportedModules","hmr","locals","_util","Bullet","danmu","_classCallCheck","duration","container","start","prior","bookChannelId","copyDom","textContent","txt","mode","status","containerPos","getBoundingClientRect","left","elPos","top","isFullscreen","clearTimeout","removeTimer","pastS","Date","getTime","moveTime","moveV","nowS","moveMoreS","moveContainerWidth","transition","pastDuration","startTime","self","leftDuration","right","setTimeout","func","containerPos_","bulletPos","pauseMove","startMove","emit","bullet","Channel","reset","on","removeBullet","containerWidth","containerHeight","containerLeft","containerRight","bulletResizeTimer","abs","resize","bulletBtn","main","data","size","config","area","end","fontSize","navigator","userAgent","channelSize","channels","queue","scroll","bottom","operating","bookId","_loop","resized","channel_id","topInit","_loop2","channelHeight","_loop3","num","_loop4","_loop5","occupy","message","flag","channel","pos","max","curBullet","curBulletPos","curS","curV","curT","newS","newV","newT","bOffset","unshift","nextAddTime","channelId","cb","Main","comments","timer","retryTimer","interval","updateQueue","rdata","bol","sort","b","readData","dataHandle","resetWithCb","init","currentTime","formatTime","player","hideArr","attach","addBullet","detach","Control","defaultOff","state","switchBtn","TypeError","searchString","contains","isValue","create","opts1","process","dest","error","assign","foo","bar","trzy","normalizeOpts","isCallable","dscr","desc","writable","gs","set","once","off","methods","descriptors","callable","Function","defineProperties","descriptor","listener","__ee__","__eeOnceListener__","listeners","candidate","args","DanmuJs","_this","overlap","_eventEmitter2","default","comment","containerStyle","addEventListener","focus","clk","createEvent","initEvent","Event","dispatchEvent","pause","play","stop","_danmu"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"danmu.js\"] = factory();\n\telse\n\t\troot[\"danmu.js\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","let util = {}\n\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\n  let dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    let key = item\n    let value = attrs[item]\n    if (el === 'video' || el === 'audio') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nutil.hasClass = function (el, className) {\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } else {\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nutil.addClass = function (el, className) {\n  if (el.classList) {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } else if (!util.hasClass(el, className)) {\n    el.className += ' ' + className\n  }\n}\n\nutil.removeClass = function (el, className) {\n  if (el.classList) {\n    className.split(/\\s+/g).forEach(item => {\n      el.classList.remove(item)\n    })\n  } else if (util.hasClass(el, className)) {\n    className.split(/\\s+/g).forEach(item => {\n      let reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      el.className = el.className.replace(reg, ' ')\n    })\n  }\n}\n\nutil.toggleClass = function (el, className) {\n  className.split(/\\s+/g).forEach(item => {\n    if (util.hasClass(el, item)) {\n      util.removeClass(el, item)\n    } else {\n      util.addClass(el, item)\n    }\n  })\n}\n\nutil.findDom = function (el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    if (sel.startsWith('#')) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\nutil.padStart = function (str, length, pad) {\n  let charstr = String(pad)\n  let len = length >> 0\n  let maxlen = Math.ceil(len / charstr.length)\n  let chars = []\n  let r = String(str)\n  while (maxlen--) {\n    chars.push(charstr)\n  }\n  return chars.join('').substring(0, len - r.length) + r\n}\n\nutil.format = function (time) {\n  if (window.isNaN(time)) {\n    return ''\n  }\n  let hour = util.padStart(Math.floor(time / 3600), 2, 0)\n  let minute = util.padStart(Math.floor((time - hour * 3600) / 60), 2, 0)\n  let second = util.padStart(Math.floor((time - hour * 3600 - minute * 60)), 2, 0)\n  return (hour === '00' ? [minute, second] : [hour, minute, second]).join(':')\n}\n\nutil.event = function (e) {\n  if (e.touches) {\n    let touch = e.touches[0] || e.changedTouches[0]\n    e.clientX = touch.clientX || 0\n    e.clientY = touch.clientY || 0\n    e.offsetX = touch.pageX - touch.target.offsetLeft\n    e.offsetY = touch.pageY - touch.target.offsetTop\n  }\n  e._target = e.target || e.srcElement\n}\n\nutil.typeOf = function (obj) {\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\nutil.deepCopy = function (dst, src) {\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\n    Object.keys(src).forEach(key => {\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (!dst[key]) {\n          dst[key] = src[key]\n        } else {\n          util.deepCopy(dst[key], src[key])\n        }\n      } else if (util.typeOf(src[key]) === 'Array') {\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\nutil.getBgImage = function (el) {\n  //fix: return current page url when url is none\n  let url = (el.currentStyle || window.getComputedStyle(el, null)).backgroundImage\n  if(!url || url == 'none') {\n    return '';\n  }\n  let a = document.createElement('a')\n  a.href = url.replace(/url\\(\"|\"\\)/g, '')\n  return a.href\n}\n\nutil.copyDom = function (dom) {\n  if (dom && dom.nodeType === 1) {\n    let back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\nutil.setInterval = function (context, eventName, intervalFunc, frequency) {\n  if (!context._interval[eventName]) {\n    context._interval[eventName] = setInterval(intervalFunc.bind(context), frequency)\n  }\n}\n\nutil.clearInterval = function (context, eventName) {\n  clearInterval(context._interval[eventName])\n  context._interval[eventName] = null\n}\n\nutil.createImgBtn = function (name, imgUrl, width, height) {\n  let btn = util.createDom(`xg-${name}`, '', {}, `xgplayer-${name}-img`)\n  btn.style.backgroundImage = `url(\"${imgUrl}\")`\n  if (width && height) {\n    let w, h, unit\n    ['px', 'rem', 'em', 'pt', 'dp', 'vw', 'vh', 'vm', '%'].every((item) => {\n      if (width.indexOf(item) > -1 && height.indexOf(item) > -1) {\n        w = parseFloat(width.slice(0, width.indexOf(item)).trim())\n        h = parseFloat(height.slice(0, height.indexOf(item)).trim())\n        unit = item\n        return false\n      } else {\n        return true\n      }\n    })\n    btn.style.width = `${w}${unit}`\n    btn.style.height = `${h}${unit}`\n    btn.style.backgroundSize = `${w}${unit} ${h}${unit}`\n    if (name === 'start') {\n      btn.style.margin = `-${h / 2}${unit} auto auto -${w / 2}${unit}`\n    } else {\n      btn.style.margin = 'auto 5px auto 5px'\n    }\n  }\n  return btn\n}\n\nutil.Hex2RGBA = function (hex, alpha) {\n  let rgb = [] // 定义rgb数组\n  if (/^\\#[0-9A-F]{3}$/i.test(hex)) {\n    let sixHex = '#'\n    hex.replace(/[0-9A-F]/ig, function (kw) {\n      sixHex += kw + kw\n    })\n    hex = sixHex\n  }\n  if (/^#[0-9A-F]{6}$/i.test(hex)) {\n    hex.replace(/[0-9A-F]{2}/ig, function (kw) {\n      rgb.push(eval('0x' + kw))\n    })\n    return `rgba(${rgb.join(',')}, ${alpha})`\n  } else {\n    return 'rgba(255, 255, 255, 0.1)'\n  }\n}\n\nutil.formatTime = function (time) {\n  let s = Math.floor(time)\n  let ms = time - s\n  return s * 1000 + ms\n}\n\nexport default util\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import util from './utils/util'\n\n/**\n * [Bullet 弹幕构造类]\n * @type {Class}\n */\nclass Bullet {\n  constructor (danmu, options) {\n    this.danmu = danmu\n    this.duration = options.duration\n    this.id = options.id\n    this.container = danmu.container\n    this.start = options.start\n    this.prior = options.prior\n    this.bookChannelId = options.bookChannelId\n\n    let el\n    if(options.el && options.el.nodeType === 1) {\n      el = util.copyDom(options.el)\n    } else {\n      el = document.createElement('div')\n      el.textContent = options.txt\n      if(options.style) {\n        let style = options.style\n        Object.keys(style).forEach(function (key) {\n          el.style[key] = style[key]\n        })\n      }\n    }\n\n    if(options.mode === 'top' || options.mode === 'bottom') {\n      this.mode = options.mode\n    } else {\n      this.mode = 'scroll'\n    }\n\n    this.el = el\n    this.status = 'waiting'// waiting,start,end\n    let containerPos = this.container.getBoundingClientRect()\n    this.el.style.left = `${containerPos.width}px`\n  }\n  attach () {\n    this.container.appendChild(this.el)\n    this.elPos = this.el.getBoundingClientRect()\n    this.width = this.elPos.width\n    this.height = this.elPos.height\n  }\n  detach () {\n    if(this.container && this.el) {\n      this.container.removeChild(this.el)\n    }\n    this.el = null\n  }\n  topInit () {\n    this.el.style.top = `${this.top}px`\n  }\n  pauseMove (containerPos, isFullscreen = false) {\n    // console.log('pauseMove')\n    let self = this\n    if(this.status === 'paused') {\n      return\n    }\n    this.status = 'paused'\n    clearTimeout(self.removeTimer)\n    if (!this.el) {\n      return\n    }\n    if(this.mode === 'scroll') {\n      if(isFullscreen) {\n        let pastDuration = (new Date().getTime() - self.moveTime) / 1000\n        let pastS = pastDuration * this.moveV\n        let ratio = 0\n        let nowS = 0\n        // console.log('self.moveMoreS: ' + self.moveMoreS)\n        // console.log('pastS: ' + pastS)\n        if(self.moveMoreS - pastS >= 0) {\n          ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\n          nowS = ratio * containerPos.width\n        } else {\n          nowS = self.moveMoreS - pastS\n        }\n        // console.log('nowS: ' + nowS)\n        this.el.style.left = `${nowS}px`\n      } else {\n        this.el.style.left = `${this.el.getBoundingClientRect().left - containerPos.left}px`\n      }\n      this.el.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)'\n      this.el.style.transition = 'transform 0s linear 0s'\n    } else {\n      if(!this.pastDuration || !this.startTime) {\n        this.pastDuration = 1\n      } else {\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\n      }\n    }\n  }\n  startMove (containerPos) {\n    // console.log('startMove')\n    let self = this\n    if (!this.el) {\n      return\n    }\n    if(this.status === 'start') {\n      return\n    }\n    this.status = 'start'\n    function func () {\n      if (self.el) {\n        if(self.mode === 'scroll') {\n          let containerPos_ = self.danmu.container.getBoundingClientRect()\n          let bulletPos = self.el.getBoundingClientRect()\n          if (bulletPos && bulletPos.right <= containerPos_.left + 100) {\n            self.status = 'end'\n            self.remove()\n          } else {\n            self.pauseMove(containerPos_)\n            self.startMove(containerPos_)\n          }\n        } else {\n          self.status = 'end'\n          self.remove()\n        }\n      }\n    }\n    if(this.mode === 'scroll') {\n      this.moveV = (containerPos.width + this.width) / this.duration * 1000\n      let leftDuration = (self.el.getBoundingClientRect().right - containerPos.left) / this.moveV\n      this.el.style.transition = `transform ${leftDuration}s linear 0s`\n      setTimeout(function () {\n        if (self.el) {\n          self.el.style.transform = `translateX(-${self.el.getBoundingClientRect().right - containerPos.left}px) translateY(0px) translateZ(0px)`\n          self.moveTime = new Date().getTime()\n          self.moveMoreS = self.el.getBoundingClientRect().left - containerPos.left\n          self.moveContainerWidth = containerPos.width\n          self.removeTimer = setTimeout(func, leftDuration * 1000)\n        }\n      }, 20)\n    } else {\n      // this.el.style.width = `${this.width}px`\n      // this.el.style.height = `${this.height}px`\n      this.el.style.left = '50%'\n      this.el.style.margin = `0 0 0 -${this.width/2}px`\n      if(!this.pastDuration) {\n        this.pastDuration = 1\n      }\n      let leftDuration = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0\n      this.removeTimer = setTimeout(func, leftDuration)\n      this.startTime = new Date().getTime()\n    }\n  }\n  remove () {\n    // console.log('remove')\n    let self = this\n    if (this.removeTimer) {\n      clearTimeout(this.removeTimer)\n    }\n    if (self.el && self.el.parentNode) {\n      let parent = self.el.parentNode\n      parent.removeChild(self.el)\n      self.el = null\n      self.danmu.emit('bullet_remove', {\n        bullet: self\n      })\n    }\n  }\n}\n\nexport default Bullet\n","/**\n * [Channel 弹幕轨道控制]\n * @type {Class}\n */\nclass Channel {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.reset()\n    let self = this\n    this.danmu.on('bullet_remove', function (r) {\n      self.removeBullet(r.bullet)\n    })\n    this.containerPos = this.danmu.container.getBoundingClientRect()\n    this.containerWidth = this.containerPos.width\n    this.containerHeight = this.containerPos.height\n    this.containerLeft = this.containerPos.left\n    this.containerRight = this.containerPos.right\n    // this.player.on('timeupdate', function () {\n    this.danmu.bulletResizeTimer = setInterval(function () {\n      self.containerPos = self.danmu.container.getBoundingClientRect()\n      if (Math.abs(self.containerPos.width - self.containerWidth) >= 2 || Math.abs(self.containerPos.height - self.containerHeight) >= 2 || Math.abs(self.containerPos.left - self.containerLeft) >= 2 || Math.abs(self.containerPos.right - self.containerRight) >= 2) {\n        // console.log('新播放器宽度：' + self.containerPos.width)\n        // console.log('旧播放器宽度：' + self.playerWidth)\n        // console.log('新播放器高度：' + self.containerPos.height)\n        // console.log('旧播放器高度：' + self.playerHeight)\n        // console.log('新播放器左：' + self.containerPos.left)\n        // console.log('旧播放器左：' + self.playerLeft)\n        // console.log('新播放器右：' + self.containerPos.right)\n        // console.log('旧播放器右：' + self.playerRight)\n        self.containerWidth = self.containerPos.width\n        self.containerHeight = self.containerPos.height\n        self.containerLeft = self.containerPos.left\n        self.containerRight = self.containerPos.right\n        self.resize(true)\n      }\n    }, 50)\n    // ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'].forEach(item => {\n    //   document.addEventListener(item, function () {\n    //     console.log(item)\n    //     setTimeout(function () {\n    //       self.resize(true)\n    //     }, 20)\n    //   })\n    // })\n  }\n  resize (isFullscreen = false) {\n    let container = this.danmu.container\n    let self = this\n    setTimeout(function () {\n      if (self.danmu.bulletBtn.main.data) {\n        self.danmu.bulletBtn.main.data.forEach(item => {\n          if (item.bookChannelId) {\n            delete item['bookChannelId']\n            // console.log('resize导致' + item.id + '号优先弹幕预定取消')\n          }\n        })\n      }\n      // console.log('resize导致所有轨道恢复正常使用')\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize = Math.floor(self.height / fontSize)\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      if (self.channels && self.channels.length <= channels.length) {\n        for (let i = 0; i < self.channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              if (item.el) {\n                channels[i].queue[key].push(item)\n                if(!item.resized) {\n                  item.pauseMove(self.containerPos, isFullscreen)\n                  item.startMove(self.containerPos)\n                  item.resized = true\n                }\n              }\n            })\n          })\n          self.channels[i].queue['bottom'].forEach(item => {\n            if (item.el) {\n              channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n              if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\n                let channel_id = [].concat(item.channel_id)\n                item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                item.top = item.channel_id[0] * fontSize\n                if (self.danmu.config.area && self.danmu.config.area.start) {\n                  item.top += self.containerHeight * self.danmu.config.area.start\n                }\n                item.topInit()\n              }\n              if(!item.resized) {\n                item.pauseMove(self.containerPos, isFullscreen)\n                item.startMove(self.containerPos)\n                item.resized = true\n              }\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        self.channelHeight = fontSize\n      } else if (self.channels && self.channels.length > channels.length) {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i] = {\n            id: i,\n            queue: {\n              scroll: [],\n              top: [],\n              bottom: []\n            },\n            operating: {\n              scroll: false,\n              top: false,\n              bottom: false\n            },\n            bookId: {}\n          };\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            if (key === 'top' && i > Math.floor(channels.length / 2)) {\n\n            } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n\n            } else {\n              let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n              self.channels[num].queue[key].forEach((item, index) => {\n                if (item.el) {\n                  channels[i].queue[key].push(item)\n                  if(key === 'bottom') {\n                    if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                      let channel_id = [].concat(item.channel_id)\n                      item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                      item.top = item.channel_id[0] * fontSize\n                      if (self.danmu.config.area && self.danmu.config.area.start) {\n                        item.top += self.containerHeight * self.danmu.config.area.start\n                      }\n                      item.topInit()\n                    }\n                  }\n                  if(!item.resized) {\n                    item.pauseMove(self.containerPos, isFullscreen)\n                    item.startMove(self.containerPos)\n                    item.resized = true\n                  }\n                }\n                self.channels[num].queue[key].splice(index, 1)\n              })\n            }\n          })\n        }\n        for (let i = channels.length; i < self.channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            self.channels[i].queue[key].forEach(item => {\n              item.pauseMove(self.containerPos)\n              item.remove()\n            })\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          ['scroll', 'top', 'bottom'].forEach(key => {\n            channels[i].queue[key].forEach(item => {\n              // console.log('resized 重置:' + item)\n              item.resized = false\n            })\n          })\n        }\n        self.channels = channels\n        self.channelHeight = fontSize\n      }\n    }, 10)\n  }\n  addBullet (bullet) {\n    // if (bullet.prior) {\n      // console.log(bullet.id + '号优先弹幕请求注册')\n    // }\n    let self = this\n    let danmu = this.danmu\n    let channels = this.channels\n    let channelHeight = this.channelHeight\n    let occupy = Math.ceil(bullet.height / channelHeight)\n    if (occupy > channels.length) {\n      return {\n        result: false,\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\n      }\n    } else {\n      let flag = true, channel, pos = -1\n      for (let i = 0, max = channels.length; i < max; i++) {\n        if (channels[i].queue[bullet.mode].some(item => item.id === bullet.id)) {\n          return {\n            result: false,\n            message: `exsited, channelOrder=${i},danmu_id=${bullet.id}`\n          }\n        }\n      }\n      if(bullet.mode === 'scroll') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            channel = channels[j]\n            if (channel.operating.scroll) {\n              flag = false\n              break\n            }\n            if ((channel.bookId.scroll || bullet.prior) && (channel.bookId.scroll !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating.scroll = true\n            let curBullet = channel.queue.scroll[0]\n            if (curBullet) {\n              let curBulletPos = curBullet.el.getBoundingClientRect()\n              if (curBulletPos.right > self.containerPos.right) {\n                flag = false\n                channel.operating.scroll = false\n                break\n              }\n\n              // Vcur * t + Scur已走 - Widthcur = Vnew * t\n              // t = (Scur已走 - Widthcur) / (Vnew - Vcur)\n              // Vnew * t < Widthplayer\n              let curS = curBulletPos.left - self.containerPos.left + curBulletPos.width\n              let curV = (self.containerPos.width + curBulletPos.width) / curBullet.duration\n              let curT = curS / curV\n\n              let newS = self.containerPos.width\n              let newV = (self.containerPos.width + bullet.width) / bullet.duration\n              let newT = newS / newV\n\n              if (!danmu.config.bOffset) {\n                danmu.config.bOffset = 0\n              }\n              if (curV < newV && curT + danmu.config.bOffset > newT) {\n                flag = false\n                channel.operating.scroll = false\n                break\n              }\n            }\n            channel.operating.scroll = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'top') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j > Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'bottom') {\n        for (let i = channels.length - occupy; i >= 0; i--) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if(j <= Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      }\n\n      if (pos !== -1) {\n        for (let i = pos, max = pos + occupy; i < max; i++) {\n          channel = channels[i]\n          channel.operating[bullet.mode] = true\n          channel.queue[bullet.mode].unshift(bullet)\n          if (bullet.prior) {\n            delete channel.bookId[bullet.mode]\n            // console.log(i + '号轨道恢复正常使用')\n          }\n          channel.operating[bullet.mode] = false\n        }\n        if (bullet.prior) {\n          // console.log(bullet.id + '号优先弹幕运行完毕')\n          delete bullet['bookChannelId']\n          let dataList = danmu.bulletBtn.main.data\n          dataList.some(function (item) {\n            if (item.id === bullet.id) {\n              delete item['bookChannelId']\n              return true\n            } else {\n              return false\n            }\n          })\n        }\n        bullet.channel_id = [pos, occupy]\n        bullet.top = pos * channelHeight\n        if (self.danmu.config.area && self.danmu.config.area.start) {\n          bullet.top += self.containerHeight * self.danmu.config.area.start\n        }\n        return {\n          result: bullet,\n          message: 'success'\n        }\n      } else {\n        if (bullet.prior) {\n          if (!bullet.bookChannelId) {\n            pos = -1\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n              flag = true\n              for (let j = i; j < i + occupy; j++) {\n                if (channels[j].bookId[bullet.mode]) {\n                  flag = false\n                  break\n                }\n              }\n              if (flag) {\n                pos = i\n                break\n              }\n            }\n            if (pos !== -1) {\n              for (let j = pos; j < pos + occupy; j++) {\n                channels[j].bookId[bullet.mode] = bullet.id\n                // console.log(j + '号轨道被' + bullet.id + '号优先弹幕预定')\n              }\n              let nextAddTime = 2\n              let dataList = danmu.bulletBtn.main.data\n              dataList.some(function (item) {\n                if (item.id === bullet.id) {\n                  // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                  item.start += nextAddTime * 1000\n                  item.bookChannelId = [pos, occupy]\n                  // console.log(bullet.id + '号优先弹幕预定了' + pos + '~' + pos + occupy - 1 + '号轨道')\n                  // console.log(`${bullet.id}号优先弹幕预定了${pos}~${pos + occupy - 1}号轨道`)\n                  return true\n                } else {\n                  return false\n                }\n              })\n            }\n          } else {\n            let nextAddTime = 2\n            let dataList = danmu.bulletBtn.main.data\n            dataList.some(function (item) {\n              if (item.id === bullet.id) {\n                // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                item.start += nextAddTime * 1000\n                return true\n              } else {\n                return false\n              }\n            })\n          }\n        }\n        return {\n          result: false,\n          message: 'no surplus will right'\n        }\n      }\n    }\n  }\n  removeBullet (bullet) {\n    // console.log('removeBullet')\n    let channels = this.channels\n    let channelId = bullet.channel_id\n    let channel\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\n      channel = channels[i]\n      if (channel) {\n        channel.operating[bullet.mode] = true\n        let i = -1\n        channel.queue[bullet.mode].some((item, index) => {\n          if (item.id === bullet.id) {\n            i = index\n            return true\n          } else {\n            return false\n          }\n        })\n        if (i > -1) {\n          channel.queue[bullet.mode].splice(i, 1)\n        }\n        channel.operating[bullet.mode] = false\n      }\n    }\n  }\n  reset () {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    setTimeout(function () {\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n      }\n      self.container = container\n      let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n      let channelSize = Math.floor(self.height / fontSize)\n      let channels = []\n      for (let i = 0; i < channelSize; i++) {\n        channels[i] = {\n          id: i,\n          queue: {\n            scroll: [],\n            top: [],\n            bottom: []\n          },\n          operating: {\n            scroll: false,\n            top: false,\n            bottom: false\n          },\n          bookId: {}\n        }\n      }\n      self.channels = channels\n      self.channelHeight = fontSize\n    }, 200)\n  }\n  resetWithCb (cb, main) {\n    let container = this.danmu.container\n    let self = this\n    if (self.channels && self.channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach(key => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach(item => {\n            item.pauseMove(self.containerPos)\n            item.remove()\n          })\n        }\n      })\n    }\n    let size = container.getBoundingClientRect()\n    self.width = size.width\n    self.height = size.height\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\n      self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\n    }\n    self.container = container\n    let fontSize = /mobile/ig.test(navigator.userAgent) ? 10 : 12\n    let channelSize = Math.floor(self.height / fontSize)\n    let channels = []\n    for (let i = 0; i < channelSize; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n    self.channels = channels\n    self.channelHeight = fontSize\n    if (cb) {\n      cb(true, main)\n    }\n  }\n}\n\nexport default Channel\n","import Channel from './channel'\nimport Bullet from './bullet'\nimport util from './utils/util'\n\n/**\n * [Main 弹幕主进程]\n * @type {Class}\n */\nclass Main {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.container = danmu.container\n    this.channel = new Channel(danmu)// 弹幕轨道实例\n    this.data = [].concat(danmu.config.comments)\n    this.queue = []// 等待播放的弹幕队列\n    this.timer = null// 弹幕动画定时器句柄\n    this.retryTimer = null// 弹幕更新重试定时器句柄\n    this.interval = 2000// 弹幕队列缓存间隔\n    this.status = 'idle'// 当前弹幕正在闲置\n    danmu.on('bullet_remove', this.updateQueue.bind(this))\n  }\n  // 在渲染队列中移除已经展示完的弹幕对象\n  updateQueue (rdata) {\n    let self = this\n    self.queue.some((item, index) => {\n      if (item.id === rdata.bullet.id) {\n        self.queue.splice(index, 1)\n        return true\n      } else {\n        return false\n      }\n    })\n  }\n  init (bol, self) {\n    if (!self) {\n      self = this\n    }\n    self.data.sort((a, b) => a.start - b.start)\n    if (!self.retryTimer) {\n      self.retryTimer = setInterval(function () {\n        self.readData()\n        self.dataHandle()\n      }, self.interval - 1000)\n    }\n  }\n  // 启动弹幕渲染主进程\n  start () {\n    let self = this\n    this.status = 'playing'\n    this.queue = []\n    this.container.innerHTML = ''\n    this.channel.resetWithCb(self.init, self)\n  }\n  stop () {\n    let self = this\n    this.status = 'closed'\n    clearInterval(self.retryTimer)\n    self.retryTimer = null\n    self.channel.reset()\n    this.queue = []\n    self.container.innerHTML = ''\n  }\n  play () {\n    this.status = 'playing'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            if(!item.resized) {\n              item.startMove(containerPos)\n              item.resized = true\n            }\n          })\n        }\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.resized = false\n          })\n        }\n      })\n    }\n  }\n  pause () {\n    this.status = 'paused'\n    let channels = this.channel.channels\n    let containerPos = this.danmu.container.getBoundingClientRect()\n    if (channels && channels.length > 0) {\n      ['scroll', 'top', 'bottom'].forEach( key => {\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach(item => {\n            item.pauseMove(containerPos)\n          })\n        }\n      })\n    }\n  }\n  dataHandle () {\n    let self = this\n    if (this.status === 'paused' || this.status === 'closed') {\n      return\n    }\n    if (self.queue.length) {\n      self.queue.forEach(item => {\n        if (item.status === 'waiting' || item.status === 'paused') {\n          // item.status = 'start'\n          item.startMove(self.channel.containerPos)\n        }\n      })\n    }\n  }\n  readData () {\n    let self = this, danmu = this.danmu, currentTime = util.formatTime(danmu.player.currentTime)\n    let bullet, interval = self.interval, channel = self.channel, result\n    let list = self.data.filter(item => {\n      if(!item.start && self.danmu.hideArr.indexOf(item.mode) < 0) {\n        item.start = currentTime\n      }\n      return self.danmu.hideArr.indexOf(item.mode) < 0 && item.start - interval <= currentTime && currentTime <= item.start + interval\n    })\n    if (list.length > 0) {\n      list.forEach(item => {\n        bullet = new Bullet(danmu, item)\n        bullet.attach()\n\n        result = channel.addBullet(bullet)\n        if (result.result) {\n          self.queue.push(bullet)\n          bullet.topInit()\n        } else {\n          bullet.detach()\n        }\n      })\n    }\n  }\n}\n\nexport default Main\n","import util from './utils/util'\nimport Main from './main'\n\nclass Control {\n  constructor (danmu) {\n    this.danmu = danmu\n    this.main = new Main(danmu)\n    if(!danmu.config.defaultOff) {\n      this.main.start()\n    }\n  }\n\n  createSwitch (state = true) {\n    this.switchBtn = util.createDom('dk-switch', '<span class=\"txt\">弹</span>', {}, `danmu-switch ${state ? 'danmu-switch-active' : ''}`)\n    return this.switchBtn\n  }\n}\n\nexport default Control\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","// Deprecated\n\n\"use strict\";\n\nmodule.exports = function (obj) {\n return typeof obj === \"function\";\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from 'event-emitter'\nimport Control from './control'\nimport util from './utils/util'\n\nclass DanmuJs {\n  constructor (options) {\n    this.config = util.deepCopy({\n      overlap: false,\n      area: {\n        start: 0,\n        end: 1\n      },\n      comments: []\n    }, options)\n    this.hideArr = []\n    EventEmitter(this)\n    let self = this\n    this.config.comments.forEach(comment => {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      if(!comment.mode) {\n        comment.mode = 'scroll'\n      }\n    })\n    if(this.config.container && this.config.container.nodeType === 1) {\n      this.container = this.config.container\n    } else {\n      this.emit('error', 'container id can\\'t be empty')\n      return false\n    }\n    if(this.config.containerStyle) {\n      let style = this.config.containerStyle\n      Object.keys(style).forEach(function (key) {\n        self.container.style[key] = style[key]\n      })\n    }\n    if(this.config.player) {\n      this.player = this.config.player\n    } else {\n      this.emit('error', 'player can\\'t be empty')\n      return false\n    }\n    util.addClass(this.container, 'danmu')\n    this.bulletBtn = new Control(this);\n    ['touchend', 'click', 'dblclick'].forEach(item => {\n      this.container.addEventListener(item, function () {\n        if(self.player) {\n          self.player.focus()\n          let clk\n          if (document.createEvent) {\n            clk = document.createEvent('Event')\n            clk.initEvent(item, true, true)\n          } else {\n            clk = new Event(item)\n          }\n          self.player.dispatchEvent(clk)\n        }\n      }, false)\n    })\n    this.emit('ready')\n  }\n\n  start () {\n    this.bulletBtn.main.start()\n  }\n\n  pause () {\n    this.bulletBtn.main.pause()\n  }\n\n  play () {\n    this.bulletBtn.main.play()\n  }\n\n  stop () {\n    this.bulletBtn.main.stop()\n  }\n\n  sendComment (comment) {\n    if (comment && comment.id && comment.duration && (comment.el || comment.txt)) {\n      comment.duration = comment.duration < 5000 ? 5000 : comment.duration\n      this.bulletBtn.main.data.push(comment)\n    }\n  }\n\n  setCommentDuration (id, duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (id && duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.some(data => {\n        if(data.id === id) {\n          data.duration = duration\n          return true\n        } else {\n          return false\n        }\n      })\n      this.bulletBtn.main.queue.some(item => {\n        if(item.id === id) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          item.startMove(containerPos_)\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setAllDuration (mode = 'scroll', duration) {\n    let containerPos_ = this.container.getBoundingClientRect()\n    if (duration) {\n      duration = duration < 5000 ? 5000 : duration\n      this.bulletBtn.main.data.forEach(data => {\n        if(mode === data.mode) {\n          data.duration = duration\n        }\n      })\n      this.bulletBtn.main.queue.forEach(item => {\n        if(mode === item.mode) {\n          item.duration = duration\n          item.pauseMove(containerPos_)\n          item.startMove(containerPos_)\n        }\n      })\n    }\n  }\n\n  hide (mode = 'scroll') {\n    if(this.hideArr.indexOf(mode) < 0) {\n      this.hideArr.push(mode)\n    }\n    let arr = this.bulletBtn.main.queue.filter(item => mode === item.mode)\n    arr.forEach(item => item.remove())\n  }\n\n  show (mode = 'scroll') {\n    let index = this.hideArr.indexOf(mode)\n    if(index > -1) {\n      this.hideArr.splice(index, 1)\n    }\n  }\n}\n\nexport default DanmuJs\n","import DanmuJs from './danmu'\nimport './style/index.scss'\nexport default DanmuJs\n"],"sourceRoot":""}